###Android设备

今天有超过十亿的Andorid设备在使用，代表着成千上万个来自不同厂商的不同型号。Andorid自2008年的Android1.0之后不断进化。在不同设备类型和不同Android版本之间，许多媒体专家对Android的碎片化问题怨声载道，表明创建能运行在所有这些不同环境上的应用是不可能的。

实际上，没有那么糟糕。一些应用会有潜在的问题，但是大都数应用都能正常使用如果你遵循这本书和其他资源的指导。

####类型

Android设备形状、大小和颜色各不相同。但是，有四种主要形态。

* 手机
* 平板
* 电视
* 穿戴式设备（智能手表，Google眼镜等等。）

你通常听到开发者和专家提及这些形态，并且这本书也会时不时这么做。但是，你要理解Android1没有内置的关于设备是手机或是平板或是电视的概念。反之，Android根据功能和特性区分设备。所以，你到处找不到一个isPhone()方法，尽管如此，你可以问Android：

* 屏幕尺寸大小
* 设备有电话功能吗？
* 等等

####模拟器

自从2007年底beta版本发布之后，Android以及走了一段很长的路。Andorid每个新系统版本添加了更多的功能到平台上并且开发者能在这些功能上探索做更多的事情。

此外，Android核心开发组努力保证前后兼容。一个你今天写的应用应该能在将来版本的Andorid上（向前兼容），虽然可能缺少了一些属性或在某种兼容模式中。并且有用旧了的方法来创建能在最新和之前版本Android（向后兼容）上使用的应用。

为了帮助我们记录对我们开发者来说所有不同的操作系统版本，Android有API等级。新的API等级在Android版本包含了能影响开发者的改变的时候被定义。当你创建一个模拟器来测试你的应用的时候，你要指示模拟器模拟哪个API等级的模拟器。当你发布你的应用的时候，你要支持你的应用所支持的最老API等级，所以应用不能安装在更老的设备上。

正在写的时候，对大都数Andorid开发者来说重要的API等级有：

* API等级16（Android 4.1）
* API等级17（Andorid 4.2）
* API等级19（Android 4.4）
* API等级21（Android 5.0）
* API等级22（Android 5.1）

在这里，重要是是指有很多数量Android设备-5%或者更多，根据平台版本仪表板图所报告的。

最新的API等级是23，代表Android 6.0。

注意被Android4.4运行在首代Android穿戴设备上的是API等级20。除非你要特别开发给穿戴设备的应用，否则你不需要担心API等级20太多。

####Dalvik

对Andorid而言，Dalvik是虚拟机。虚拟机被许多编程语言所使用，例如Java、Perl和Smalltalk。Dalvik虚拟设计成像Java虚拟机一样工作，但是对Linux环境进行了优化。

所以，当某人编写一个Andorid应用的时候发生了如下事情：

1.开发者编写java语法源代码，依赖Andorid项目和第三方的类库。

2.开发者使用JavaSDK提供的javac编译器把编译源代码成Java 虚拟机字节码。

3.开发者把Java虚拟机字节码转换成Dalvik虚拟机字节码。Dalvik虚拟机字节码和其它文件一起打包进一个以apk为扩展名的ZIP压缩文件。

4.Android设备或模拟器运行APK文件，使字节码在Dalvik虚拟机实例上执行。

从你的视角看，这些东西中的大都数都被开发工具所隐藏了。你从顶端注入Java源代码，APK文件从底部出来。

但是，Dalvik虚拟机和传统Java虚拟机不同的地方会时不时影响应用开发者，并且会在相关的地方指出来

注意Android正迁移到一个新的叫作ART的运行时环境。但是，Dalivik术语仍会在被用做作构建应用的字节码上使用。


####进程和线程

当你的应用运行的时候，它会运行在它的进程里。这跟其他传统的操作系统没有明显区别。部分Dalvik的神奇之处是让多个进程能运行多个Android应用而不是消耗荒谬数量的RAM。

Android也会安排一批线程来运行你的应用。你的代码大部分时间运行在的线程，可以叫作主应用线程或用户界面线程。你不需要设置它，但在这本书的稍后内容中，你会需要关注什么能在主线程什么不能再主线程上做。你也欢迎分叉你自己的线程来完成工作，并且这是相当常见的，尽管在一些地方Android在幕后为了进行了处理。

